<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tus 3 Bolsas de Ahorro para la Independencia Financiera</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 2rem auto;
            padding: 1.5rem;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #1a202c;
            text-align: center;
            margin-bottom: 1.5rem;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        h2 {
            font-size: 1.8rem;
            font-weight: 600;
            color: #4a5568;
            margin-top: 2rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.5rem;
        }
        h3 {
            font-size: 1.4rem;
            font-weight: 600;
            color: #2d3748;
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
        }
        p {
            margin-bottom: 1rem;
        }
        .section-card {
            background-color: #f7fafc;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }
        .highlight {
            font-weight: 600;
            color: #667eea;
        }
        .tip {
            background-color: #e0f2f7;
            border-left: 4px solid #38b2ac;
            padding: 1rem;
            border-radius: 6px;
            margin-top: 1.5rem;
            font-style: italic;
        }
        .chart-container {
            width: 100%;
            max-width: 600px;
            margin: 2rem auto;
            background-color: #ffffff;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .button {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background-color: #667eea;
            color: white;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }
        .button:hover {
            background-color: #5a67d8;
        }
        .input-group {
            margin-bottom: 1rem;
        }
        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        .input-group input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 1rem;
        }
        .results {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: #edf2f7;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        .results p {
            margin-bottom: 0.5rem;
        }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin: 1rem auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="p-4">
    <div class="container">
        <h1>Tus 3 Bolsas de Ahorro para la Independencia Financiera</h1>

        <p class="text-center text-lg mb-8">¡Hola, cariño! Ahora que empiezas tu camino en el mundo laboral, es el momento perfecto para sentar las bases de tu futuro financiero. No es tan complicado como parece, solo necesitas un plan. Aquí te propongo una estrategia sencilla y efectiva, dividida en tres "bolsas" de ahorro.</p>

        <div class="section-card">
            <h2>Paso 0: Conoce tus finanzas</h2>
            <p>Antes de empezar a guardar dinero, es crucial saber cuánto ganas y cuánto gastas. Esto te ayudará a identificar cuánto puedes apartar cada mes para tus objetivos.</p>
            <div class="input-group">
                <label for="ingresos">Ingresos netos mensuales estimados (€):</label>
                <input type="number" id="ingresos" placeholder="Ej: 1200" min="0">
            </div>
            <div class="input-group">
                <label for="gastos">Gastos fijos mensuales estimados (€):</label>
                <input type="number" id="gastos" placeholder="Ej: 800" min="0">
            </div>
            <button class="button w-full" onclick="calcularAhorroPotencial()">Calcular Ahorro Potencial</button>
            <div id="ahorroPotencialResult" class="results hidden"></div>

            <h3 class="mt-6">✨ Consejos Personalizados para Ahorrar ✨</h3>
            <p>Una vez que sepas tu ahorro potencial, la IA te dará algunos consejos para empezar a gestionarlo.</p>
            <button class="button w-full" onclick="generarConsejosAhorro()">Generar Consejos</button>
            <div id="consejosAhorroResult" class="results hidden">
                <div id="consejosAhorroLoading" class="loading-spinner hidden"></div>
                <p id="consejosAhorroText"></p>
            </div>
        </div>

        <div class="section-card">
            <h2>Bolsa 1: El Colchón de Seguridad (Fondo de Emergencia)</h2>
            <p>Imagina que se te estropea el móvil, necesitas una reparación inesperada o te quedas sin trabajo temporalmente. ¡Este dinero es tu salvavidas!</p>
            <h3>¿Cuánto?</h3>
            <p>Lo ideal es tener entre <span class="highlight">3 y 6 meses de tus gastos fijos</span> cubiertos. Al principio, con tus ingresos bajos y nuestro apoyo familiar, puedes empezar con un objetivo de <span class="highlight">1.000 €</span>.</p>
            <h3>¿Dónde guardarlo?</h3>
            <p>En una <span class="highlight">cuenta remunerada</span>. Ahora mismo, algunas ofrecen alrededor de un <span class="highlight">1.5% TAE</span>. Es un interés bajo, pero lo importante es que el dinero esté disponible y seguro.</p>
            <div class="tip">
                **Consejo:** Este dinero es para emergencias REALES. No para caprichos. Una vez que lo tengas, ¡no lo toques!
            </div>
        </div>

        <div class="section-card">
            <h2>Bolsa 2: Ahorro para Objetivos a Corto Plazo</h2>
            <p>¿Quieres un coche? ¿Necesitas la fianza para un piso de alquiler en el futuro? Aquí es donde guardas el dinero para esas metas que tienes en mente para los próximos 1-3 años.</p>
            <h3>¿Cuánto?</h3>
            <p>Aquí tienes que ser tú quien estime cuánto necesitas para cada objetivo. Sé realista y ponle una fecha.</p>
            <h3>¿Dónde guardarlo?</h3>
            <p>En un <span class="highlight">fondo monetario</span> o un <span class="highlight">depósito a plazo fijo a corto plazo</span>. Son opciones de bajo riesgo que te dan un poco más que una cuenta remunerada, pero el dinero sigue siendo accesible cuando lo necesitas.</p>
            <div class="tip">
                **Consejo:** Divide tus objetivos. Por ejemplo, si quieres un coche en 2 años y cuesta 5.000 €, sabes que necesitas ahorrar unos 208 € al mes para ese objetivo.
            </div>
        </div>

        <div class="section-card">
            <h2>Bolsa 3: El Fondo Indexado (Tu Futuro Financiero)</h2>
            <p>¡Esta es la bolsa más importante y la que te dará mayor libertad a largo plazo! Aquí es donde tu dinero trabaja para ti de verdad.</p>
            <h3>¿Qué es un Fondo Indexado?</h3>
            <p>Es un tipo de inversión que replica un índice bursátil (como el S&P 500 de las 500 empresas más grandes de EE. UU.). Es una forma sencilla y diversificada de invertir en el mercado de valores sin tener que elegir acciones individuales.</p>
            <h3>¿Cuánto y Dónde?</h3>
            <p>La clave es la <span class="highlight">constancia</span>. Empieza con lo que puedas (aunque sean 50€ al mes) y auméntalo cuando tus ingresos crezcan. El objetivo es una rentabilidad media del <span class="highlight">10% anual</span> (más o menos), pero con volatilidad.</p>
            <h3>La clave: El Largo Plazo (5-20 años o más)</h3>
            <p>La volatilidad del mercado significa que el valor puede subir y bajar a corto plazo. Pero históricamente, a largo plazo, los fondos indexados tienden a crecer. ¡No te asustes si ves bajadas, es parte del proceso!</p>
            <div class="tip">
                **Consejo:** La <span class="highlight">capitalización compuesta</span> es tu mejor amiga. Cuanto antes empieces, más tiempo tendrá tu dinero para crecer. ¡Incluso pequeñas cantidades al principio pueden convertirse en mucho a lo largo de los años!
            </div>
            <p class="text-center mt-4">
                
            </p>

            <h3 class="mt-6">✨ Proyección de Ahorro con Interés Compuesto ✨</h3>
            <p>¿Quieres ver cómo podría crecer tu dinero a largo plazo? Introduce algunos datos y la IA te dará una idea.</p>
            <div class="input-group">
                <label for="aporteMensual">Aporte mensual al fondo indexado (€):</label>
                <input type="number" id="aporteMensual" placeholder="Ej: 50" min="0">
            </div>
            <div class="input-group">
                <label for="rentabilidadAnual">Rentabilidad anual esperada (%):</label>
                <input type="number" id="rentabilidadAnual" placeholder="Ej: 10" min="0" max="100">
            </div>
            <div class="input-group">
                <label for="aniosProyeccion">Años de inversión:</label>
                <input type="number" id="aniosProyeccion" placeholder="Ej: 10" min="1" max="50">
            </div>
            <button class="button w-full" onclick="generarProyeccion()">Generar Proyección</button>
            <div id="proyeccionResult" class="results hidden">
                <div id="proyeccionLoading" class="loading-spinner hidden"></div>
                <p id="proyeccionText"></p>
            </div>
        </div>

        <h2>Resumen y Siguientes Pasos:</h2>
        <ol class="list-decimal pl-5">
            <li>**Estima tus ingresos y gastos** para saber cuánto puedes ahorrar.</li>
            <li>**Construye tu Colchón de Seguridad** (Bolsa 1) en una cuenta remunerada.</li>
            <li>**Define tus Objetivos a Corto Plazo** (Bolsa 2) y ahorra para ellos en fondos monetarios o plazos fijos.</li>
            <li>**¡Empieza YA con el Fondo Indexado!** (Bolsa 3) con aportaciones regulares, por pequeñas que sean.</li>
            <li>**Sé constante** y revisa tu plan periódicamente.</li>
        </ol>

        <p class="text-center mt-8 text-lg font-semibold text-gray-700">¡Estoy aquí para ayudarte en cada paso de este camino hacia tu independencia financiera!</p>
    </div>

    <script>
        let ahorroPotencialGlobal = 0; // Variable para almacenar el ahorro potencial

        async function calcularAhorroPotencial() {
            const ingresos = parseFloat(document.getElementById('ingresos').value);
            const gastos = parseFloat(document.getElementById('gastos').value);
            const resultDiv = document.getElementById('ahorroPotencialResult');

            if (isNaN(ingresos) || isNaN(gastos)) {
                resultDiv.innerHTML = '<p class="text-red-600">Por favor, introduce valores numéricos válidos para ingresos y gastos.</p>';
                resultDiv.classList.remove('hidden');
                ahorroPotencialGlobal = 0; // Reset global value
                return;
            }

            const ahorroPotencial = ingresos - gastos;
            ahorroPotencialGlobal = ahorroPotencial; // Store in global variable

            if (ahorroPotencial < 0) {
                resultDiv.innerHTML = `<p class="text-red-600">¡Cuidado! Tus gastos (${gastos}€) superan tus ingresos (${ingresos}€). Necesitas ajustar tus gastos para poder ahorrar.</p>`;
            } else {
                resultDiv.innerHTML = `<p class="text-green-700">Tu ahorro potencial mensual es de <span class="font-bold">${ahorroPotencial.toFixed(2)}€</span>.</p>
                                      <p>Este es el dinero que puedes destinar a tus tres bolsas de ahorro cada mes.</p>`;
            }
            resultDiv.classList.remove('hidden');
        }

        async function generarConsejosAhorro() {
            const consejosResultDiv = document.getElementById('consejosAhorroResult');
            const consejosTextP = document.getElementById('consejosAhorroText');
            const consejosLoadingDiv = document.getElementById('consejosAhorroLoading');

            if (ahorroPotencialGlobal === 0 && (isNaN(parseFloat(document.getElementById('ingresos').value)) || isNaN(parseFloat(document.getElementById('gastos').value)))) {
                consejosTextP.innerHTML = '<p class="text-red-600">Por favor, calcula primero tu ahorro potencial en el paso 0.</p>';
                consejosResultDiv.classList.remove('hidden');
                return;
            }

            consejosResultDiv.classList.remove('hidden');
            consejosLoadingDiv.classList.remove('hidden');
            consejosTextP.innerHTML = '';

            try {
                const prompt = `Eres un asesor financiero amigable. Una joven ha calculado que su ahorro potencial mensual es de ${ahorroPotencialGlobal.toFixed(2)}€. Dale 3-5 consejos prácticos y motivadores para maximizar este ahorro o para empezar a implementarlo en sus 'tres bolsas' (colchón de seguridad, objetivos a corto plazo, fondo indexado). Adapta los consejos a su situación de bajos ingresos iniciales y el apoyo familiar.`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                // ¡IMPORTANTE! Reemplaza "TU_CLAVE_DE_API_AQUI" con tu clave real de la API de Gemini
                const apiKey = "TU_CLAVE_DE_API_AQUI"; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    consejosTextP.innerHTML = text.replace(/\n/g, '<br>'); // Replace newlines with <br> for HTML display
                } else {
                    consejosTextP.innerHTML = '<p class="text-red-600">Lo siento, no pude generar los consejos. Inténtalo de nuevo.</p>';
                }
            } catch (error) {
                console.error("Error al generar consejos:", error);
                consejosTextP.innerHTML = '<p class="text-red-600">Ocurrió un error al conectar con la IA. Por favor, inténtalo de nuevo más tarde.</p>';
            } finally {
                consejosLoadingDiv.classList.add('hidden');
            }
        }

        async function generarProyeccion() {
            const aporteMensual = parseFloat(document.getElementById('aporteMensual').value);
            const rentabilidadAnual = parseFloat(document.getElementById('rentabilidadAnual').value);
            const aniosProyeccion = parseFloat(document.getElementById('aniosProyeccion').value);

            const proyeccionResultDiv = document.getElementById('proyeccionResult');
            const proyeccionTextP = document.getElementById('proyeccionText');
            const proyeccionLoadingDiv = document.getElementById('proyeccionLoading');

            if (isNaN(aporteMensual) || isNaN(rentabilidadAnual) || isNaN(aniosProyeccion) || aporteMensual <= 0 || rentabilidadAnual <= 0 || aniosProyeccion <= 0) {
                proyeccionTextP.innerHTML = '<p class="text-red-600">Por favor, introduce valores numéricos válidos y positivos para todos los campos.</p>';
                proyeccionResultDiv.classList.remove('hidden');
                return;
            }

            proyeccionResultDiv.classList.remove('hidden');
            proyeccionLoadingDiv.classList.remove('hidden');
            proyeccionTextP.innerHTML = '';

            try {
                const prompt = `Eres un experto en finanzas personales y estás explicando el poder del interés compuesto a una joven de 18 años. Ella planea invertir ${aporteMensual.toFixed(2)}€ al mes con una rentabilidad anual del ${rentabilidadAnual.toFixed(2)}%. Explícale de forma sencilla y motivadora cuánto dinero podría acumular aproximadamente en ${aniosProyeccion} años, enfatizando la importancia de la constancia y el tiempo. Usa un tono cercano y alentador. No incluyas cálculos matemáticos explícitos, solo el resultado aproximado y la explicación del concepto.`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                // ¡IMPORTANTE! Reemplaza "TU_CLAVE_DE_API_AQUI" con tu clave real de la API de Gemini
                const apiKey = "AIzaSyBE5I23YyuI3bfEahNuUIBwqikuxqR1Eiw"; 
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    proyeccionTextP.innerHTML = text.replace(/\n/g, '<br>'); // Replace newlines with <br> for HTML display
                } else {
                    proyeccionTextP.innerHTML = '<p class="text-red-600">Lo siento, no pude generar la proyección. Inténtalo de nuevo.</p>';
                }
            } catch (error) {
                console.error("Error al generar proyección:", error);
                proyeccionTextP.innerHTML = '<p class="text-red-600">Ocurrió un error al conectar con la IA. Por favor, inténtalo de nuevo más tarde.</p>';
            } finally {
                proyeccionLoadingDiv.classList.add('hidden');
            }
        }
    </script>
</body>
</html>
